{"remainingRequest":"/Users/matt/Sites/motion/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0].use[1]!/Users/matt/Sites/motion/node_modules/ts-loader/index.js??ruleSet[1].rules[0].use[2]!/Users/matt/Sites/motion/dev/tests/drag-tabs.tsx","dependencies":[{"path":"/Users/matt/Sites/motion/dev/tests/drag-tabs.tsx","mtime":1642594856270},{"path":"/Users/matt/Sites/motion/node_modules/@pmmmwh/react-refresh-webpack-plugin/loader/index.js","mtime":1641995460598},{"path":"/Users/matt/Sites/motion/node_modules/cache-loader/dist/cjs.js","mtime":1641995460665},{"path":"/Users/matt/Sites/motion/node_modules/babel-loader/lib/index.js","mtime":1641995460018},{"path":"/Users/matt/Sites/motion/node_modules/ts-loader/index.js","mtime":1641995461506}],"contextDependencies":[],"result":["var _s = $RefreshSig$();\n\nimport { __read, __spreadArray } from \"tslib\";\nimport { motion, Reorder, AnimatePresence, MotionConfig, LayoutGroup } from \"framer-motion\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nexport function App() {\n  _s();\n\n  var _a = __read(useState(initialTabs), 2),\n      tabs = _a[0],\n      setTabs = _a[1];\n\n  var _b = __read(useState(tabs[0]), 2),\n      selectedTab = _b[0],\n      setSelectedTab = _b[1];\n\n  var remove = function (item) {\n    console.log(\"removing\", item.label);\n\n    if (item === selectedTab) {\n      setSelectedTab(closestItem(tabs, item));\n    }\n\n    setTabs(removeItem(tabs, item));\n  };\n\n  var add = function () {\n    var nextItem = getNextIngredient(tabs);\n\n    if (nextItem) {\n      setTabs(__spreadArray(__spreadArray([], __read(tabs), false), [nextItem], false));\n      setSelectedTab(nextItem);\n    }\n  }; // Automatically repopulate tabs when they all close\n\n\n  React.useEffect(function () {\n    if (!tabs.length) {\n      var timer_1 = setTimeout(function () {\n        setTabs(initialTabs);\n        setSelectedTab(initialTabs[0]);\n      }, 2000);\n      return function () {\n        return clearTimeout(timer_1);\n      };\n    }\n  }, [tabs.length]);\n  return React.createElement(MotionConfig, {\n    transition: {\n      duration: 0.1\n    }\n  }, React.createElement(\"div\", {\n    className: \"window\"\n  }, React.createElement(\"nav\", null, React.createElement(LayoutGroup, null, React.createElement(Reorder.Group, {\n    as: \"ul\",\n    axis: \"x\",\n    onReorder: setTabs,\n    className: \"tabs\",\n    values: tabs\n  }, React.createElement(AnimatePresence, {\n    initial: false\n  }, tabs.map(function (item) {\n    return React.createElement(Item, {\n      key: item.label,\n      item: item,\n      isSelected: selectedTab === item,\n      onClick: function () {\n        return setSelectedTab(item);\n      },\n      onRemove: function () {\n        return remove(item);\n      }\n    });\n  }))), React.createElement(motion.button, {\n    className: \"add-item\",\n    onClick: add,\n    disabled: tabs.length === allIngredients.length,\n    whileTap: {\n      scale: 0.9\n    }\n  }, React.createElement(AddIcon, null)))), React.createElement(\"main\", null, React.createElement(AnimatePresence, {\n    exitBeforeEnter: true,\n    initial: false\n  }, React.createElement(motion.div, {\n    id: \"\".concat(selectedTab ? selectedTab.label : \"empty\", \"-content\"),\n    key: selectedTab ? selectedTab.label : \"empty\",\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    initial: {\n      opacity: 0,\n      y: 20\n    },\n    exit: {\n      opacity: 0,\n      y: -20\n    },\n    transition: {\n      duration: 0.15\n    }\n  }, selectedTab ? selectedTab.icon : \"üòã\")))), React.createElement(\"style\", null, styles));\n}\n\n_s(App, \"uNVmYK2tOcDa9bSDwb+PEuRTd80=\");\n\n_c = App;\nexport var Item = function (_a) {\n  var item = _a.item,\n      onClick = _a.onClick,\n      onRemove = _a.onRemove,\n      isSelected = _a.isSelected;\n  return React.createElement(Reorder.Item, {\n    value: item,\n    id: item.label + \"-tab\",\n    initial: {\n      opacity: 0,\n      y: 30,\n      transition: {\n        duration: 0.15\n      }\n    },\n    animate: {\n      backgroundColor: isSelected ? \"#f3f3f3\" : \"#fff\",\n      opacity: 1,\n      y: 0,\n      transition: {\n        duration: 0.15\n      }\n    },\n    exit: {\n      opacity: 0,\n      y: 20,\n      transition: {\n        duration: 0.3\n      }\n    },\n    whileDrag: {\n      backgroundColor: \"#e3e3e3\"\n    },\n    className: \"tab\" + (isSelected ? \" selected\" : \"\"),\n    onPointerDown: onClick,\n    dragTransition: {\n      bounceStiffness: 10000,\n      bounceDamping: 10000\n    }\n  }, React.createElement(motion.span, {\n    layout: \"position\",\n    id: item.label + \"-label\"\n  }, \"\".concat(item.icon, \" \").concat(item.label)), React.createElement(motion.div, {\n    layout: true,\n    className: \"close\"\n  }, React.createElement(motion.button, {\n    id: item.label + \"-remove\",\n    onPointerDown: function (event) {\n      event.stopPropagation();\n      onRemove();\n    },\n    initial: false,\n    animate: {\n      backgroundColor: isSelected ? \"#e3e3e3\" : \"#fff\"\n    }\n  }, React.createElement(CloseIcon, null))));\n};\n_c2 = Item;\n\nfunction removeItem(_a, item) {\n  var _b = __read(_a),\n      arr = _b.slice(0);\n\n  var index = arr.indexOf(item);\n  index > -1 && arr.splice(index, 1);\n  return arr;\n}\n\nfunction closestItem(arr, item) {\n  var index = arr.indexOf(item);\n\n  if (index === -1) {\n    return arr[0];\n  } else if (index === arr.length - 1) {\n    return arr[arr.length - 2];\n  } else {\n    return arr[index + 1];\n  }\n}\n\nfunction getNextIngredient(ingredients) {\n  var existing = new Set(ingredients);\n  return allIngredients.find(function (ingredient) {\n    return !existing.has(ingredient);\n  });\n}\n\nvar allIngredients = [{\n  icon: \"üçÖ\",\n  label: \"Tomato\"\n}, {\n  icon: \"ü•¨\",\n  label: \"Lettuce\"\n}, {\n  icon: \"üßÄ\",\n  label: \"Cheese\"\n}, {\n  icon: \"ü•ï\",\n  label: \"Carrot\"\n}, {\n  icon: \"üçå\",\n  label: \"Banana\"\n}, {\n  icon: \"ü´ê\",\n  label: \"Blueberries\"\n}, {\n  icon: \"ü•Ç\",\n  label: \"Champers?\"\n}];\n\nvar _a = __read(allIngredients, 3),\n    tomato = _a[0],\n    lettuce = _a[1],\n    cheese = _a[2];\n\nvar initialTabs = [tomato, lettuce, cheese];\n\nfunction CloseIcon() {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"10\",\n    height: \"10\",\n    viewBox: \"0 0 20 20\"\n  }, React.createElement(\"path\", {\n    d: \"M 3 3 L 17 17\",\n    fill: \"transparent\",\n    strokeWidth: \"3\",\n    strokeLinecap: \"round\"\n  }), React.createElement(\"path\", {\n    d: \"M 17 3 L 3 17\",\n    fill: \"transparent\",\n    strokeWidth: \"3\",\n    strokeLinecap: \"round\"\n  }));\n}\n\n_c3 = CloseIcon;\n\nfunction AddIcon() {\n  return React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"10\",\n    height: \"10\",\n    viewBox: \"0 0 20 20\",\n    style: {\n      transform: \"rotate(45deg)\",\n      stroke: \"black\"\n    }\n  }, React.createElement(\"path\", {\n    d: \"M 3 3 L 17 17\",\n    fill: \"transparent\",\n    strokeWidth: \"3\",\n    strokeLinecap: \"round\"\n  }), React.createElement(\"path\", {\n    d: \"M 17 3 L 3 17\",\n    fill: \"transparent\",\n    strokeWidth: \"3\",\n    strokeLinecap: \"round\"\n  }));\n}\n\n_c4 = AddIcon;\nvar styles = \"\\nbody {\\n  width: 100vw;\\n  height: 100vh;\\n  background: #ff0055;\\n  overflow: hidden;\\n  padding: 0;\\n  margin: 0;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.window {\\n  width: 480px;\\n  height: 360px;\\n  border-radius: 10px;\\n  background: white;\\n  overflow: hidden;\\n  box-shadow: 0 1px 1px hsl(0deg 0% 0% / 0.075),\\n    0 2px 2px hsl(0deg 0% 0% / 0.075), 0 4px 4px hsl(0deg 0% 0% / 0.075),\\n    0 8px 8px hsl(0deg 0% 0% / 0.075), 0 16px 16px hsl(0deg 0% 0% / 0.075);\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\nnav {\\n  background: #fdfdfd;\\n  padding: 5px 5px 0;\\n  border-radius: 10px;\\n  border-bottom-left-radius: 0;\\n  border-bottom-right-radius: 0;\\n  border-bottom: 1px solid #eeeeee;\\n  height: 44px;\\n  display: grid;\\n  grid-template-columns: 1fr 35px;\\n  max-width: 480px;\\n  overflow: hidden;\\n}\\n\\n.tabs {\\n  flex-grow: 1;\\n  display: flex;\\n  justify-content: flex-start;\\n  align-items: flex-end;\\n  flex-wrap: nowrap;\\n  width: 420px;\\n  padding-right: 10px;\\n}\\n\\nmain {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  font-size: 128px;\\n  flex-grow: 1;\\n  user-select: none;\\n}\\n\\nul,\\nli {\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n  font-family: \\\"Poppins\\\", sans-serif;\\n  font-weight: 500;\\n  font-size: 14px;\\n}\\n\\nli {\\n  border-radius: 5px;\\n  border-bottom-left-radius: 0;\\n  border-bottom-right-radius: 0;\\n  width: 100%;\\n  padding: 10px 15px;\\n  position: relative;\\n  background: white;\\n  cursor: pointer;\\n  height: 24px;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  flex: 1;\\n  min-width: 0;\\n  overflow: hidden;\\n  position: relative;\\n  user-select: none;\\n}\\n\\nli span {\\n  flex-shrink: 1;\\n  flex-grow: 1;\\n  line-height: 18px;\\n  white-space: nowrap;\\n  display: block;\\n  min-width: 0;\\n  padding-right: 30px;\\n  mask-image: linear-gradient(to left, transparent 10px, #fff 30px);\\n  -webkit-mask-image: linear-gradient(to left, transparent 10px, #fff 30px);\\n}\\n\\nli .close {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  right: 10px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-end;\\n  flex-shrink: 0;\\n}\\n\\nli button {\\n  width: 20px;\\n  height: 20px;\\n  border: 0;\\n  background: #fff;\\n  border-radius: 3px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  stroke: #000;\\n  margin-left: 10px;\\n  cursor: pointer;\\n  flex-shrink: 0;\\n}\\n\\n.background {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  width: 300px;\\n  background: #fff;\\n}\\n\\n.add-item {\\n  width: 30px;\\n  height: 30px;\\n  background: #eee;\\n  border-radius: 50%;\\n  border: 0;\\n  cursor: pointer;\\n  align-self: center;\\n}\\n\\n.add-item:disabled {\\n  opacity: 0.4;\\n  cursor: default;\\n  pointer-events: none;\\n}\\n\\n\";\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"Item\");\n$RefreshReg$(_c3, \"CloseIcon\");\n$RefreshReg$(_c4, \"AddIcon\");",null]}